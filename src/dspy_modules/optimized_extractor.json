{
  "predict": {
    "traces": [],
    "train": [],
    "demos": [
      {
        "augmented": true,
        "email_text": "6/24/25, 6:54 PM Flipkart.com Mail - Re: TOT-Terms of Trade inclusion effective Jan 2025 || N.K Proteins\nAA Divya Sree Gorrela- Vendor <gorreladivyas.vc@flipkart.com/>\nRe: TOT-Terms of Trade inclusion effective Jan 2025 || N.K Proteins\nJanardhan SA-Vendor <janardhan.sa@flipkart.com> Tue, Mar 11, 2025 at 1:14 PM\nTo: Jitesh Bafna <jitesh.bafna@flipkart.com>, Divya Sree Gorrela- Vendor <gorreladivyas.vc@flipkart.com>\nCc: \"PRADIP MAZUMDER ..\" <pradip.mazumder@nkproteins.com>, Mukul Kumar Dixit <mukul dixit@flipkart.com>, GroceryClaims \nThanks for the update. Its updated in CMM.\n@Divya Sree Gorrela- Vendor for Claiming\nOn Mon, Feb 10, 2025 at 2:50 PM Jitesh Bafna <jitesh.bafna@flipkart.com> wrote:\n+Janardhan SA-Vendor +Mukul Kumar Dixit +Grocery Claims +Lovely Kumari-Vendor - FYI\nOn Mon, Feb 10, 2025 at 2:30 PM PRADIP MAZUMDER . <pradip.mazumder@nkproteins.com> wrote:\nApproved\nDear PRADIP and YOGESH\nAs discussed over call, please approve the same\n0.5% TOT will be charged on all the Base cost of the primary billing done effective Jan 2025 till Dec 2026 so request you to kindly approve the same\n6/24/25, 6:54 PM Flipkart.com Mail - Re: TOT-Terms of Trade inclusion effective Jan 2025 || N.K Proteins\n\n]@) TIRUPATI EDIBLE OILS AS\nEz ONE OF THE BEST BRANDS - 2023\nJanardhan SA <janardhan.sa@flipkart.com> Tue, Apr 29, 2025 at 7:37 PM\n&nbsp;            FSN    KAM              Company            Team                                                      Tittle Margin/NLC base Target/Flat Periodicity Primary/Secondary City- NL/Pan  TOT base on  TOT%\n\nEDOFAA8T6PHMTAKY Jitesh N K Proteins Pvt Ltd Staples-Staples                Pankaj Double Filter Groundnut Oil 1 L Pouch             NLC        Flat     Monthly           Primary          PAN NLC\\_with\\_Tax 0.005\n\nEDOFAA8T7EDWRUZX Jitesh N K Proteins Pvt Ltd Staples-Staples                       Soyalite Refined Soyabean Oil 5 L Can             NLC        Flat     Monthly           Primary          PAN NLC\\_with\\_Tax 0.005\n\nEDOFAA8TG7GAYJAV Jitesh N K Proteins Pvt Ltd Staples-Staples                    Tirupati Active Refined Corn Oil 5 L Can             NLC        Flat     Monthly           Primary          PAN NLC\\_with\\_Tax 0.005\n\nEDOFAA8TGCVTHQTE Jitesh N K Proteins Pvt Ltd Staples-Staples                         Pankaj Filter Groundnut Oil 5 L Can             NLC        Flat     Monthly           Primary          PAN NLC\\_with\\_Tax 0.005\n\nEDOFAA8TGGPVMPAK Jitesh N K Proteins Pvt Ltd Staples-Staples            Tirupati Active Refined Corn Oil 15 L Tin (15 L)             NLC        Flat     Monthly           Primary          PAN NLC\\_with\\_Tax 0.005\n\nEDOFAA8TGJY864GX Jitesh N K Proteins Pvt Ltd Staples-Staples            Tirupati Filter Groundnut Oil 1 L Plastic Bottle             NLC        Flat     Monthly           Primary          PAN NLC\\_with\\_Tax 0.005\n\nEDOFAA8TGY4XSPGQ Jitesh N K Proteins Pvt Ltd Staples-Staples       Tirupati Sunpride Refined Sunflower Oil 5 L Can (5 L)             NLC        Flat     Monthly           Primary          PAN NLC\\_with\\_Tax 0.005\n\nEDOFAA8TJAGYTA6Q Jitesh N K Proteins Pvt Ltd Staples-Staples                     Soyalite Refined Soyabean Oil 1 L Pouch             NLC        Flat     Monthly           Primary          PAN NLC\\_with\\_Tax 0.005\n\nEDOFAA8TJHQVBCGA Jitesh N K Proteins Pvt Ltd Staples-Staples                 Pankaj Double Filter Groundnut Oil 15 L Can             NLC        Flat     Monthly           Primary          PAN NLC\\_with\\_Tax 0.005\n\nEDOFAA8TKRKFKQDH Jitesh N K Proteins Pvt Ltd Staples-Staples                  Tirupati Active Refined Corn Oil 1 L Pouch             NLC        Flat     Monthly           Primary          PAN NLC\\_with\\_Tax 0.005\n\nEDOFAA8TMQGYYGTN Jitesh N K Proteins Pvt Ltd Staples-Staples                    Tirupati Refined Cottonseed Oil 15 L Tin             NLC        Flat     Monthly           Primary          PAN NLC\\_with\\_Tax 0.005\n\nEDOFAA8TPCFVVG4E Jitesh N K Proteins Pvt Ltd Staples-Staples     Tirupati Sunpride Refined Sunflower Oil 1 L Pouch (1 L)             NLC        Flat     Monthly           Primary          PAN NLC\\_with\\_Tax 0.005\n\nEDOFAA8TRPJFZETD Jitesh N K Proteins Pvt Ltd Staples-Staples                   Tirupati Active Refined Corn Oil 15 L Can             NLC        Flat     Monthly           Primary          PAN NLC\\_with\\_Tax 0.005\n\nEDOFAA8TTZTS8RTQ Jitesh N K Proteins Pvt Ltd Staples-Staples                    Tirupati Refined Cottonseed Oil 15 L Can             NLC        Flat     Monthly           Primary          PAN NLC\\_with\\_Tax 0.005\n\nEDOFAA8TUGYFUYXH Jitesh N K Proteins Pvt Ltd Staples-Staples                     Tirupati Refined Cottonseed Oil 5 L Can             NLC        Flat     Monthly           Primary          PAN NLC\\_with\\_Tax 0.005\n\nEDOFAA8TY5HHVNBH Jitesh N K Proteins Pvt Ltd Staples-Staples                   Tirupati Refined Cottonseed Oil 1 L Pouch             NLC        Flat     Monthly           Primary          PAN NLC\\_with\\_Tax 0.005\n\nEDOFWZVF5AGEZFGP Jitesh N K Proteins Pvt Ltd Staples-Staples           TIRUPATI Premium Groundnut Oil Plastic Bottle 1 L             NLC        Flat     Monthly           Primary          PAN NLC\\_with\\_Tax 0.005\n\nEDOFWZVFGHMGPXY6 Jitesh N K Proteins Pvt Ltd Staples-Staples             TIRUPATI Premium Mustard Oil Plastic Bottle 1 L             NLC        Flat     Monthly           Primary          PAN NLC\\_with\\_Tax 0.005\n\nEDOFWZVFMGXHZ6G3 Jitesh N K Proteins Pvt Ltd Staples-Staples TIRUPATI Premium Kachi Ghani Mustard Oil Plastic Bottle 5 L             NLC        Flat     Monthly           Primary          PAN NLC\\_with\\_Tax 0.005\n\nEDOFWZVFNGGZ8XGG Jitesh N K Proteins Pvt Ltd Staples-Staples           TIRUPATI Premium Groundnut Oil Plastic Bottle 5 L             NLC        Flat     Monthly           Primary          PAN NLC\\_with\\_Tax 0.005\n\nEDOFWZVFNRVXEJQK Jitesh N K Proteins Pvt Ltd Staples-Staples                    TIRUPATI Premium Groundnut Oil Pouch 1 L             NLC        Flat     Monthly           Primary          PAN NLC\\_with\\_Tax 0.005\n\nEDOFXNPHWFHXRYE9 Jitesh N K Proteins Pvt Ltd Staples-Staples          Tirupati Sunpride Sunflower Oil Plastic Bottle 1 L             NLC        Flat     Monthly           Primary          PAN NLC\\_with\\_Tax 0.005\n\nEDOFYTWJPYFKZWZT Jitesh N K Proteins Pvt Ltd Staples-Staples                              TIRUPATI Rice Bran Oil Can 5 L             NLC        Flat     Monthly           Primary          PAN NLC\\_with\\_Tax 0.005\n\nEDOFYTWJWZ3ZYDYR Jitesh N K Proteins Pvt Ltd Staples-Staples                            TIRUPATI Rice Bran Oil Pouch 1 L             NLC        Flat     Monthly           Primary          PAN NLC\\_with\\_Tax 0.005\n\nEDOGY5KX3KEUFQBQ Jitesh N K Proteins Pvt Ltd Staples-Staples                                                          NA             NLC        Flat     Monthly           Primary          PAN NLC\\_with\\_Tax 0.005\n\nEDOGYF9ZMRMFKZCG Jitesh N K Proteins Pvt Ltd Staples-Staples                                                          NA             NLC        Flat     Monthly           Primary          PAN NLC\\_with\\_Tax 0.005\n\nEDOGYF9ZVGYJSHGE Jitesh N K Proteins Pvt Ltd Staples-Staples                                                          NA             NLC        Flat     Monthly           Primary          PAN NLC\\_with\\_Tax 0.005\n\nEDOFAA8TB7QZNWFY Jitesh N K Proteins Pvt Ltd            None                                                        None             NLC        Flat     Monthly           Primary          PAN NLC\\_with\\_Tax 0.005",
        "table_data": "No table data available",
        "xlsx_data": "No XLSX data provided",
        "reasoning": "The email discusses the approval and implementation of a Terms of Trade (TOT) charge of 0.5% on the base cost of primary billing for N.K Proteins, effective from Jan 2025 to Dec 2026. The scheme is part of a broader commercial agreement and is periodic in nature. Key details are derived from the subject line, body content, and product-specific listings (e.g., \"NLC_with_Tax 0.005\").",
        "scheme_name": "N.K Proteins Jan 2025 - Dec 2026 TOT Scheme",
        "scheme_name_reasoning": "Constructed from the brand name \"N.K Proteins,\" the period \"Jan 2025 - Dec 2026,\" and the scheme type \"TOT,\" aligning with the email’s subject. No explicit name was provided.",
        "scheme_description": "N.K Proteins 0.5% TOT on base cost for primary billing from Jan 2025 to Dec 2026.",
        "scheme_description_reasoning": "The email explicitly states a 0.5% TOT on the base cost of primary billing, with a duration from Jan 2025 to Dec 2026, as part of a periodic commercial agreement.",
        "scheme_period": "Duration",
        "scheme_period_reasoning": "The scheme spans a continuous period from Jan 2025 to Dec 2026, indicating a time-based duration rather than an event-driven scheme.",
        "duration": "01/01/2025 to 31/12/2026",
        "duration_reasoning": "Extracted from \"effective Jan 2025 till Dec 2026\" in the email. Converted to DD/MM/YYYY format.",
        "discount_type": "Percentage of NLC",
        "discount_type_reasoning": "The TOT is calculated as 0.5% of NLC (\"NLC_with_Tax 0.005\"), which is explicitly stated in the product-specific listings.",
        "max_cap": "No Cap",
        "max_cap_reasoning": "No maximum cap or limit is mentioned in the email for the TOT.",
        "vendor_name": "N.K Proteins",
        "vendor_name_reasoning": "Identified from the email subject (\"N.K Proteins\") and product listings (e.g., \"Jitesh N K Proteins Pvt Ltd\").",
        "price_drop_date": "N/A",
        "price_drop_date_reasoning": "No mention of price drop, price protection, or NLC reduction in the email.",
        "start_date": "01/01/2025",
        "start_date_reasoning": "Derived from \"effective Jan 2025\" in the email, converted to 01/01/2025.",
        "end_date": "31/12/2026",
        "end_date_reasoning": "Derived from \"till Dec 2026\" in the email, converted to 31/12/2026.",
        "fsn_file_config_file": "No",
        "fsn_file_config_file_reasoning": "No FSN/SKU lists or configuration data are explicitly mentioned in the email. Product codes are listed, but no file references are made.",
        "min_actual_discount_or_agreed_claim": "FALSE",
        "min_discount_reasoning": "No mention of a \"minimum of actual vs agreed\" clause in the email.",
        "remove_gst_from_final_claim": "Not Specified",
        "remove_gst_reasoning": "No explicit mention of GST handling (inclusive/exclusive) in the email.",
        "over_and_above": "FALSE",
        "over_and_above_reasoning": "No explicit mention of \"over and above\" existing schemes in the email.",
        "scheme_document": "No",
        "scheme_document_reasoning": "No formal approval letter or document is mentioned in the email.",
        "discount_slab_type": "Not Applicable",
        "discount_slab_type_reasoning": "For Buyside-Periodic schemes, this field is fixed as \"Not Applicable.\"",
        "best_bet": "Not Applicable",
        "best_bet_reasoning": "For Buyside-Periodic schemes, this field is fixed as \"Not Applicable.\"",
        "brand_support_absolute": "Not Applicable",
        "brand_support_absolute_reasoning": "This is a Buyside-Periodic scheme, not a One-Off claim, so this field is irrelevant.",
        "gst_rate": "Not Applicable",
        "gst_rate_reasoning": "This is a Buyside-Periodic scheme, not a One-Off claim, so this field is irrelevant.",
        "scheme_type": "BUY_SIDE",
        "scheme_type_reasoning": "The scheme is a JBP/TOT agreement tied to Flipkart’s purchases from N.K Proteins, with periodic (Quarterly/Annual) support. It aligns with the **BUY_SIDE** criteria of supporting Flipkart’s purchase costs.",
        "scheme_subtype": "PERIODIC_CLAIM",
        "scheme_subtype_reasoning": "The TOT is applied monthly over a duration (Jan 2025 - Dec 2026), and the scheme is tied to Flipkart’s purchasing activity, qualifying it as a periodic claim under BUY_SIDE.",
        "config_brand_support": "0.5% of NLC",
        "config_brand_support_reasoning": "The TOT is stated as 0.5% of NLC (\"NLC_with_Tax 0.005\") in the product-specific listings.",
        "config_vendor_split_ratio": "Not specified",
        "config_vendor_split_reasoning": "No split ratio is mentioned in the email. The entire 0.5% TOT is borne by the vendor.",
        "config_unit_slab_lower": "Not Applicable",
        "config_unit_slab_upper": "Not Applicable",
        "config_slab_reasoning": "The scheme applies uniformly to all products listed, with no quantity-based slabs mentioned.",
        "config_max_support_value": "No Cap",
        "config_max_support_reasoning": "No global cap on the total support amount is mentioned in the email.",
        "config_margin": "Not specified",
        "config_margin_reasoning": "No margin percentage is mentioned in the email."
      },
      {
        "augmented": true,
        "email_text": "Charmi Malay Shah <[EMAIL_4]@flipkart.com>\nMamyPoko Claims working - June 2025\n[PERSON_1] <[EMAIL_5]@unicharm.com> Mon, Jun 30, 2025 at 12:11 PM\nHi Charmi,\nThere is a mismatch in CI raised in below 2 points:\nFor MRPs 2599, 1399, 1998 and 749 - upto 32% is accomodative of 8% promo support without any additional\nsupports as in last year's TOT , Hence all CIs for promos 30% is deducted - Rs 38K\nWe dont have any MRP 439 pack due which we cant provide any support - hence deducted 4K\nFinal claims amount - Rs 19611874\nSales Related :\nWe are approving an amount of Rs 19611874 as a one-off sales support for the month(s) of June'25\nClaims Split\nSupplier, Bifurcation of Total Support\nGLOBAL_MARKETING_DEL\nGanesh Enterprises, Bangalore 5295206\nFHPL_MamyPoko, Mumbai 1961187\nJoyGuru Trading House (Will be raised for FHPL) 4902969\nFHPL,Bangalore 3530137\nFHPL, Hyderabad (Raise to Matrix) 1568950\nSwati Enterprises, Chennai 980594\nAgarwal Distributor, Lucknow 1176712\nDurai and Co, Coimbatore 196119\nGrand Total 19611874\nWe are approving an amount of Rs3800000 as a one-off sales support for the month(s) of May'25.\nMay'25 SuperCoins Split\nBifurcation of Total\nSupplier Support\nGLOBAL_MARKETING_DEL 760000\nGanesh Enterprises, Bangalore 570000\nFHPL_MamyPoko, Mumbai 190000\nJoyGuru Trading House (Will be raised for FHPL) 1140000\nFHPL,Bangalore 1140000\nGrand Total 3800000\nHyperlocal:\nWe are approving an amount of  Rs 1069963 as a one-off sales support for the month(s) of  June'25\nSeller level Bifurcation\nGlobal, Delhi-->320989\nGlobal, Mumbai-->320989\nFatehpuria, Bangalore-->427985\nTotal-->1069963\n\nSeller level Bifurcation,\n\"Global, Delhi\",320989\n\"Global, Mumbai\",320989\n\"Fatehpuria, Bangalore\",427985\n,1069963",
        "table_data": "No table data available",
        "xlsx_data": "No XLSX data provided",
        "reasoning": "The email discusses a one-off sales support claim from Unicharm for June 2025, specifically for MamyPoko, referencing deductions and approved amounts. The scheme is classified as Buyside-Periodic due to the absence of price drops or lifestyle keywords. Key evidence includes terms like \"one-off sales support\" and references to adjustments for promotional activities.",
        "scheme_name": "MamyPoko June 2025 Sales Support",
        "scheme_name_reasoning": "The email references \"MamyPoko Claims working - June 2025\" and specifies \"June'25 sales support.\" The vendor (Unicharm) and period (June 2025) align with the naming pattern [Brand] + [Period] + [Type], resulting in \"MamyPoko June 2025 Sales Support.\"",
        "scheme_description": "Unicharm offers one-off sales support for MamyPoko's June 2025 sales, including adjustments for MRP mismatch and promotional deductions.",
        "scheme_description_reasoning": "The core offer is a one-off sales support scheme for June 2025, explicitly stating \"approved amount\" and purpose (e.g., \"deductions for MRP mismatch,\" \"promotional support\"). The business intent is summarized concisely.",
        "scheme_period": "Duration",
        "scheme_period_reasoning": "The scheme spans May and June 2025 (\"June'25\" and \"May'25\"). While it involves a time period, the primary focus is June 2025.",
        "duration": "01/06/2025 to 30/06/2025",
        "duration_reasoning": "The email references \"June'25\" as the primary period, with start and end dates implied as the first and last days of June 2025.",
        "discount_type": "Absolute",
        "discount_type_reasoning": "The email specifies \"approved amount\" in fixed rupees (e.g., \"Rs 19611874,\" \"Rs 3800000\"). There is no mention of percentage-based calculations.",
        "max_cap": "19611874",
        "max_cap_reasoning": "The email states, \"We are approving an amount of Rs 19611874 as a one-off sales support for June'25,\" which represents the maximum cap. The figure is extracted as-is.",
        "vendor_name": "Unicharm",
        "vendor_name_reasoning": "The email domain and sender signature (\"[EMAIL_5]@unicharm.com\") confirm the vendor as Unicharm.",
        "price_drop_date": "N/A",
        "price_drop_date_reasoning": "The email contains no mention of price drops or NLC reductions.",
        "start_date": "01/06/2025",
        "start_date_reasoning": "The primary period referenced is \"June'25,\" with the start date inferred as the first day of the month.",
        "end_date": "30/06/2025",
        "end_date_reasoning": "The primary period referenced is \"June'25,\" with the end date inferred as the last day of the month.",
        "fsn_file_config_file": "No",
        "fsn_file_config_file_reasoning": "No FSN/SKU lists or product configuration details are mentioned in the email text or attachments.",
        "min_actual_discount_or_agreed_claim": "FALSE",
        "min_discount_reasoning": "No mention of clauses like \"minimum of actual vs agreed\" or \"lower of the two\" is found.",
        "remove_gst_from_final_claim": "Not Specified",
        "remove_gst_reasoning": "No GST-related instructions or phrasing (e.g., \"inclusive of GST,\" \"plus GST\") is present.",
        "over_and_above": "FALSE",
        "over_and_above_reasoning": "No explicit statement of being \"over and above\" existing schemes is present.",
        "scheme_document": "No",
        "scheme_document_reasoning": "No formal approval letter or scheme document is referenced or attached.",
        "discount_slab_type": "Not Applicable",
        "discount_slab_type_reasoning": "For Buyside-Periodic schemes, this field is fixed as \"Not Applicable.\"",
        "best_bet": "Not Applicable",
        "best_bet_reasoning": "For Buyside-Periodic schemes, this field is fixed as \"Not Applicable.\"",
        "brand_support_absolute": "19611874",
        "brand_support_absolute_reasoning": "The email states, \"We are approving an amount of Rs 19611874...,\" which is extracted as the absolute support value.",
        "gst_rate": "Not Applicable",
        "gst_rate_reasoning": "For Buyside-Periodic schemes, this field is fixed as \"Not Applicable.\"",
        "scheme_type": "BUY_SIDE",
        "scheme_type_reasoning": "1. **Rule Check**: No price drop or lifestyle vendor keywords match.  \n2. **Business Direction**: The support is for Flipkart's purchasing (sales claims with deductions).  \n3. **Key Evidence**: Terms like \"sales support,\" \"claims,\" and \"approved amount.\"  \n4. **Why not others**: Not SELL_SIDE (no customer-facing incentives) or PDC/OFC (not a one-off).",
        "scheme_subtype": "PERIODIC_CLAIM",
        "scheme_subtype_reasoning": "1. **Rule Check**: No PDC or LS keywords apply.  \n2. **Mechanism Analysis**: The scheme is tied to quarterly/monthly sales claims.  \n3. **Keyword Evidence**: \"sales support for the month(s)\" and references to May/June 2025.",
        "config_brand_support": "Rs 19611874",
        "config_brand_support_reasoning": "Extracted from \"We are approving an amount of Rs 19611874 as a one-off sales support.\"",
        "config_vendor_split_ratio": "Not specified",
        "config_vendor_split_reasoning": "No information on cost sharing between Unicharm and Flipkart is provided.",
        "config_unit_slab_lower": "0",
        "config_unit_slab_upper": "999999",
        "config_slab_reasoning": "No unit/quantity slabs are mentioned. Default lower and upper bounds are used.",
        "config_max_support_value": "Rs 19611874",
        "config_max_support_reasoning": "Extracted from \"approved amount of Rs 19611874,\" representing the global cap.",
        "config_margin": "Not specified",
        "config_margin_reasoning": "No margin percentage is mentioned in the email text."
      }
    ],
    "signature": {
      "instructions": "Extract Retailer Hub claim fields from vendor email/PDF content.\n\nCRITICAL INSTRUCTIONS:\n1. Do NOT rely solely on keyword matching - analyze the BUSINESS CONTEXT.\n2. Understand the INTENT behind the email - what is the brand trying to communicate?\n3. Consider the ENTIRE email content before making classification decisions.\n4. Provide detailed REASONING for each field extraction.\n5. When uncertain, analyze what makes business sense given the context.",
      "fields": [
        {
          "prefix": "Email Text:",
          "description": "Email content from brand/vendor regarding commercial schemes, offers, or support"
        },
        {
          "prefix": "Table Data:",
          "description": "Tabular data (FSN lists, SKU data, discount slabs, pricing info)"
        },
        {
          "prefix": "Xlsx Data:",
          "description": "XLSX spreadsheet content (may contain product/SKU configuration)"
        },
        {
          "prefix": "Reasoning:",
          "description": "High-level logic summary of the extraction process."
        },
        {
          "prefix": "Scheme Name:",
          "description": "Extract or construct the scheme name.\nANALYZE: Look at email subject, headers, and opening lines for scheme/offer title.\nPATTERNS: 'Scheme', 'Offer', 'Support', 'Plan', 'Program', 'Initiative', 'Approval'.\nCONSTRUCT IF MISSING: Create from [Brand] + [Period/Event] + [Type], e.g., 'Realme Q1 Pricing Support'.\nFORMAT: Short phrase, 3-7 words max.\nEXAMPLES: 'Campus Diwali Sellout Offer', 'Puma FY25 JBP Scheme', 'Samsung Price Protection Claim'."
        },
        {
          "prefix": "Scheme Name Reasoning:",
          "description": "REASONING: How did you identify/construct the scheme name? What text patterns indicated this?"
        },
        {
          "prefix": "Scheme Description:",
          "description": "Summarize the scheme's purpose and offer in 1-2 concise lines.\nANALYZE: What is the brand offering? What is the business intent? What support/discount type?\nINCLUDE: Offer type, percentage/amount, applicable products, purpose.\nEXCLUDE: Subject line verbatim, lengthy details.\nFORMAT: 10-20 words, single sentence.\nEXAMPLE: 'Brand offers 5% sellout support on select SKUs for Q1 visibility campaign.'"
        },
        {
          "prefix": "Scheme Description Reasoning:",
          "description": "REASONING: What is the core offer? How did you distill the business intent?"
        },
        {
          "prefix": "Scheme Period:",
          "description": "Classify as 'Duration' or 'Event'.\nDURATION: Has date range (from X to Y), runs continuously. Q1/Q2/FY periods, month-based.\nEVENT: Tied to specific event (Diwali, Big Billion Days, Republic Day Sale).\nDEFAULT: Return 'Duration' if unclear.\nOUTPUT: Exactly 'Duration' or 'Event'."
        },
        {
          "prefix": "Scheme Period Reasoning:",
          "description": "REASONING: Is this a time-period scheme or event-based scheme?"
        },
        {
          "prefix": "Duration:",
          "description": "Extract the scheme validity period.\nFORMAT: 'DD/MM/YYYY to DD/MM/YYYY' ONLY.\nCONVERT: All date formats to DD/MM/YYYY (Jan 1, 2024 → 01/01/2024).\nLOOK FOR: 'valid from', 'effective from', 'w.e.f', 'period', 'from...to', 'until'.\nIF NOT FOUND: Return 'Not Specified'."
        },
        {
          "prefix": "Duration Reasoning:",
          "description": "REASONING: What dates did you find? How did you identify start vs end?"
        },
        {
          "prefix": "Discount Type:",
          "description": "Identify the discount calculation basis.\nOPTIONS:\n- 'Percentage of NLC': Discount on Net Landing Cost (% of NLC, NLC-linked).\n- 'Percentage of MRP': Discount on Maximum Retail Price (% of MRP).\n- 'Absolute': Fixed rupee amount (Rs.X per unit, flat amount).\n- 'Not Specified': Basis not mentioned.\nANALYZE: Look for how the discount/support is calculated, not just the value."
        },
        {
          "prefix": "Discount Type Reasoning:",
          "description": "REASONING: What calculation basis was indicated? How did you determine this?"
        },
        {
          "prefix": "Max Cap:",
          "description": "Extract maximum support/claim cap amount.\nLOOK FOR: 'cap', 'maximum', 'not exceeding', 'upto', 'ceiling', 'limit'.\nOUTPUT: Number only without currency symbols (50000, not Rs.50,000).\nIF NOT FOUND: Return 'No Cap'."
        },
        {
          "prefix": "Max Cap Reasoning:",
          "description": "REASONING: What cap-related language did you find?"
        },
        {
          "prefix": "Vendor Name:",
          "description": "Extract the BRAND/COMPANY name offering the scheme.\nCORRECT: 'Campus', 'Puma', 'Realme', 'Samsung', 'LG', 'Whirlpool', 'Vivo', 'iQOO'.\nLOOK FOR: Brand in signature, letterhead, email domain, 'From' brand name.\nCRITICAL: Return brand name, NOT personal names (Rajesh Kumar, M. Sonika).\nANALYZE: Who is PROVIDING the support? That's the vendor."
        },
        {
          "prefix": "Vendor Name Reasoning:",
          "description": "REASONING: How did you identify the brand vs personal sender name?"
        },
        {
          "prefix": "Price Drop Date:",
          "description": "Extract price drop effective date (PDC schemes only).\nAPPLICABLE: Only if scheme involves price reduction/protection.\nLOOK FOR: 'price drop effective', 'cost change w.e.f', 'NLC revision from'.\nSTRICT FORMAT: 'DD/MM/YYYY' (e.g. 25/05/2024) or 'N/A'."
        },
        {
          "prefix": "Price Drop Date Reasoning:",
          "description": "REASONING: Is this a PDC scheme? What price drop date was mentioned?"
        },
        {
          "prefix": "Start Date:",
          "description": "Extract scheme START date. STRICT FORMAT: 'DD/MM/YYYY' (e.g. 01/01/2024) or 'Not Specified'.\nPRIORITY: Scheme start > Invoice start > Email date."
        },
        {
          "prefix": "Start Date Reasoning:",
          "description": "REASONING: How did you identify the start date?"
        },
        {
          "prefix": "End Date:",
          "description": "Extract scheme END date. STRICT FORMAT: 'DD/MM/YYYY' (e.g. 31/12/2024) or 'Not Specified'.\nLOOK FOR: 'valid until', 'ending', 'expires on', 'through'."
        },
        {
          "prefix": "End Date Reasoning:",
          "description": "REASONING: How did you identify the end date?"
        },
        {
          "prefix": "Fsn File Config File:",
          "description": "Is there a list of FSNs, SKUs, or product config?\nCHECK: table_data, xlsx_data for product identifiers.\nLOOK FOR: FSN codes, SKU lists, model numbers, 'attached list', 'refer attachment'.\nOUTPUT: 'Yes' if product list exists, 'No' otherwise."
        },
        {
          "prefix": "Fsn File Config File Reasoning:",
          "description": "REASONING: Did you find product lists or configuration data?"
        },
        {
          "prefix": "Min Actual Discount Or Agreed Claim:",
          "description": "Is there a 'minimum of actual vs agreed' cap clause?\nLOOK FOR: 'whichever is lower', 'minimum of actual', 'lower of the two'.\nOUTPUT: 'TRUE' if such logic mentioned, 'FALSE' otherwise."
        },
        {
          "prefix": "Min Discount Reasoning:",
          "description": "REASONING: Did you find comparative minimum clause?"
        },
        {
          "prefix": "Remove Gst From Final Claim:",
          "description": "GST handling instruction.\n- 'Yes': Amount INCLUDES GST (inclusive of tax).\n- 'No': Amount EXCLUDES GST (plus GST/GST extra).\n- 'Not Specified': GST treatment not mentioned."
        },
        {
          "prefix": "Remove Gst Reasoning:",
          "description": "REASONING: What GST-related phrases did you find?"
        },
        {
          "prefix": "Over And Above:",
          "description": "Is support ADDITIONAL to existing schemes?\nLOOK FOR: 'over and above', 'O&A', 'in addition to', 'additional support'.\nOUTPUT: 'TRUE' only if explicitly stated, 'FALSE' otherwise."
        },
        {
          "prefix": "Over And Above Reasoning:",
          "description": "REASONING: Was O&A explicitly mentioned?"
        },
        {
          "prefix": "Scheme Document:",
          "description": "Is formal approval/letter attached or referenced?\nLOOK FOR: 'approval letter', 'attached approval', 'sanction document'.\nOUTPUT: 'Yes' or 'No'."
        },
        {
          "prefix": "Scheme Document Reasoning:",
          "description": "REASONING: Did you find formal document references?"
        },
        {
          "prefix": "Discount Slab Type:",
          "description": "Output 'notApplicable' (fixed value for Buyside-Periodic). \n        'Not Applicable' for all other scheme types."
        },
        {
          "prefix": "Discount Slab Type Reasoning:",
          "description": "REASONING: For Buyside-Periodic, state that this is a fixed constant requirement."
        },
        {
          "prefix": "Best Bet:",
          "description": "Output 'FALSE' (fixed string for Buyside-Periodic). \n        'Not Applicable' for all other scheme types."
        },
        {
          "prefix": "Best Bet Reasoning:",
          "description": "REASONING: For Buyside-Periodic, state that this is a fixed constant requirement."
        },
        {
          "prefix": "Brand Support Absolute:",
          "description": "Absolute support amount (One-Off claims only).\nLOOK FOR: 'approved amount', 'sanctioned Rs.X', 'one-time support'.\nOUTPUT: Number only, 'Not Applicable' for non One-Off."
        },
        {
          "prefix": "Brand Support Absolute Reasoning:",
          "description": "REASONING: What approval amount was stated?"
        },
        {
          "prefix": "Gst Rate:",
          "description": "GST rate for One-Off claims.\nOUTPUT: Percentage (e.g., '18%'), 'Not Applicable' for non One-Off, 'Not Specified' if not mentioned."
        },
        {
          "prefix": "Gst Rate Reasoning:",
          "description": "REASONING: What GST rate was explicitly stated?"
        },
        {
          "prefix": "Scheme Type:",
          "description": "CLASSIFY THE SCHEME TYPE with deep reasoning.\n        \nDO NOT just match keywords. ANALYZE THE BUSINESS CONTEXT:\n\n**CRITICAL RULE 1 - PRICE DROP DETECTION (HIGHEST PRIORITY):**\n→ If the email mentions \"Price drop\", \"Permanent Price drop\", \"NLC reduction\", \"cost reduction\", \"price protection\", or similar:\n  THEN: scheme_type = 'PDC' AND scheme_subtype = 'PDC'\n  This is a STANDALONE CATEGORY. Do NOT classify as BUY_SIDE or SELL_SIDE.\n  STOP processing other rules if this matches.\n\n**CRITICAL RULE 2 - LIFESTYLE VENDOR DETECTION:**\n→ If the vendor is ANY of these LIFESTYLE brands:\n  - ADITYA BIRLA LIFESTYLE BRANDS LIMITED\n  - ADITYA BIRLA FASHION AND RETAIL LIMITED\n  - MGI DISTRIBUTION PVT LTD\n  - BRAND CONCEPTS LIMITED\n  - Timex Group India Limited\n  - Titan Company Ltd\n  - METRO BRANDS LIMITED\n  - SUMITSU APPAREL PVT. LTD.\n  - Sea Turtle Private Limited\n  - High Star\n  - Juneberry\n  THEN: scheme_type = 'SELL_SIDE' AND scheme_subtype = 'LS' (LIFESTYLE)\n  REGARDLESS of other keywords in the email.\n\n**PDC** (Price Drop Claim - STANDALONE)\n→ WHAT IT MEANS: Price protection or price drop compensation.\n→ BUSINESS CONTEXT: When supplier reduces price, they compensate for existing stock.\n→ INDICATORS:\n  - \"Price drop\", \"Permanent Price drop\", \"Price Protection\", \"NLC reduction\"\n  - \"Cost reduction\", \"Price change compensation\"\n→ OUTPUT: scheme_type = 'PDC', scheme_subtype = 'PDC'\n\n**BUY_SIDE** (Claim ID prefix: BS-PC)\n→ WHAT IT MEANS: Support on PURCHASE/INWARD side. Brand helps Flipkart with purchase costs.\n→ BUSINESS CONTEXT: Schemes tied to what Flipkart BUYS from the brand.\n→ INDICATORS:\n  - Sellin incentives (not sellout)\n  - JBP/Joint Business Plan, TOT/Terms of Trade\n  - Quarterly/Annual business plans (Q1, Q2, FY support)\n  - NRV-linked, inwards support, inventory funding\n→ OUTPUT: scheme_type = 'BUY_SIDE'\n\n**SELL_SIDE** (Claim ID prefix: SS-xxx)\n→ WHAT IT MEANS: Support on SELLING/OUTWARD side. Brand helps Flipkart sell to customers.\n→ BUSINESS CONTEXT: Schemes tied to what Flipkart SELLS to end customers.\n→ INDICATORS:\n  - Sellout support (customer sales)\n  - Coupons/VPC for customer discounts\n  - Exchange/Prexo offers (customer trade-in)\n  - Bank offers (customer payment)\n  - Super Coin rewards (customer incentive)\n  - Pricing/CP support on selling price\n  - **LIFESTYLE vendors** ← ALWAYS LS SUBTYPE\n→ OUTPUT: scheme_type = 'SELL_SIDE'\n\n**OFC** (One-Off Claim)\n→ WHAT IT MEANS: One-time, ad-hoc support not tied to regular schemes.\n→ BUSINESS CONTEXT: Special approval for specific situation, not part of JBP/regular plan.\n→ INDICATORS:\n  - 'One off', 'one-off', 'one time'\n  - Ad-hoc approval, special sanction\n  - Specific amount approved for exception\n→ OUTPUT: scheme_type = 'OFC'\n\nOUTPUT: Exactly 'PDC', 'BUY_SIDE', 'SELL_SIDE', or 'OFC'.\nTHINK: Is this a Price Drop (PDC)? Or helping purchase (BUY_SIDE)? Or helping sell (SELL_SIDE)? Or special exception (OFC)?"
        },
        {
          "prefix": "Scheme Type Reasoning:",
          "description": "EXPLAIN YOUR SCHEME TYPE DECISION.\n        \nStructure:\n1. **Rule Check**: Did any CRITICAL RULES apply (Price Drop → PDC, Lifestyle Vendor → LS)?\n2. **Business Direction**: Is support for Flipkart's BUYING or SELLING activity?\n3. **Key Evidence**: What specific phrases/keywords led to this classification?\n4. **Why not others?**: Why did you rule out the other types?\n\nExample: \"This is PDC because it mentions 'Price Drop effective from 24th', triggering the Price Drop → PDC rule.\"\nExample: \"This is SELL_SIDE because the vendor is 'Titan Company Ltd' which is a Lifestyle vendor, triggering the Lifestyle → LS rule.\"\n"
        },
        {
          "prefix": "Scheme Subtype:",
          "description": "CLASSIFY THE SUBTYPE based on scheme_type.\n        \n**CRITICAL: Priority Rules (Apply in order):**\n1. **PDC Rule**: If \"Price drop\", \"Permanent Price drop\", \"NLC reduction\", \"cost reduction\", or \"price protection\" mentioned → subtype MUST be 'PDC'.\n2. **LS Rule**: Subtype MUST be 'LS' if:\n   - Keywords like \"SOR\", \"SOR discounts\", \"Monsoon Sale\", \"Monsoon\", \"Fashion\", \"Lifestyle\", or \"Clothing\" are present.\n   - OR if no keywords, the vendor identified from the email (check \"To:\" address) belongs to a LIFESTYLE brand (Aditya Birla, Timex, Titan, Metro, Brand Concepts, beewakoof, Highlander, Leemboodi etc.).\n\n**IF SELL_SIDE (Flipkart Selling Support), choose one of these EXACT CODES:**\n\n- **'CP'** (Coupon): ONLY when explicit coupon codes (VPC, Promo Code, Voucher Code) are mentioned for customer checkout.\n  → KEYWORDS: Coupon Code, VPC, Voucher Code, Promo Code.\n  → USE THIS ONLY if you see evidence of specific codes customers use at checkout.\n\n- **'PUC'** (Pricing/Sellout): General pricing, sellout support, price match, or \"CP support\" where NO coupon code is involved.\n  → INCLUDES: PUC, FDC, Sellout Support, Price Match, CP/Pricing/Sellout Support/rest all.\n  → **DEFAULT**: Use PUC for all general selling price support if no specific codes are mentioned.\n\n- **'PRX'** (Exchange): Product Exchange / Buyback / Prexo / Upgrade / BUP.\n  → KEYWORDS: Exchange, Prexo, Upgrade, Buyback, BUP, Prexo Bumpup.\n\n- **'SC'** (SuperCoin): SuperCoin Reward Points support.\n  → KEYWORDS: Super Coin, SuperCoin, Reward Points.\n\n- **'LS'** (Lifestyle): Handled by LS Priority Rule above. Includes Clothing, Watches, Footwear, etc.\n  → KEYWORDS: Lifestyle, Fashion, Clothing, Monsoon Sale, SOR discounts, SOR.\n\n**IF BUY_SIDE (Flipkart Buying Support), choose one:**\n- **'PDC'**: Price Drop / Price protection (Handled by Rule 1).\n- **'PERIODIC_CLAIM'**: Quarterly/Annual/TOT/JBP support (Only if NOT a price drop).\n\n**IF OFC (One-Off):**\n- 'OFC'\n\nOUTPUT: One code only (e.g., 'CP', 'PUC', 'PRX', 'SC', 'LS', 'PDC', 'PERIODIC_CLAIM', 'OFC')."
        },
        {
          "prefix": "Scheme Subtype Reasoning:",
          "description": "EXPLAIN your subtype decision with focus on SELL_SIDE distinctions.\n\n1. **Rule Check**: Did Rule 1 (PDC) or Rule 2 (LS) apply first? (Mention specifically if LS keywords or the 'To:' email address was the trigger).\n2. **Mechanism Analysis**: If SELL_SIDE, identify the customer-facing mechanism:\n   - Is it actual **Coupon Codes** (CP)? \n   - Is it general **Pricing/Sellout Support** (PUC)? \n   - Is it **Exchange/Upgrade** (PRX)?\n   - Is it **SuperCoin Rewards** (SC)?\n   *Note: Many emails say \"CP support\" but mean general pricing (PUC). Only choose 'CP' if you see customer-facing codes/vouchers.*\n3. **Keyword Evidence**: List the specific phrases from the text that confirm this mechanism (e.g., \"Exchange value\", \"SuperCoin support\", \"VPC code 'GET100'\").\n4. **Exclusion**: Why did you rule out the other Sell-Side types (e.g., Why PUC instead of CP)?\n"
        },
        {
          "prefix": "Config Brand Support:",
          "description": "Extract the BRAND SUPPORT value (discount/support amount per unit).\nLOOK FOR: \n- Percentage values: \"5% of NLC\", \"10% off MRP\", \"Discount of 15%\"\n- Absolute values: \"Rs.100 per unit\", \"₹50 support\", \"Fixed Rs.500\"\n- Slab-based: Extract the primary/first slab value\nFORMAT: Return the value as-is (e.g., \"5% of NLC\", \"Rs.100\", \"15%\")\nIF NOT FOUND: Return \"Not specified in email\"\n"
        },
        {
          "prefix": "Config Brand Support Reasoning:",
          "description": "REASONING: How did you identify the brand support value? What text indicated this amount?"
        },
        {
          "prefix": "Config Vendor Split Ratio:",
          "description": "Extract the VENDOR SPLIT RATIO (cost sharing between vendor and Flipkart).\nLOOK FOR:\n- Split mentions: \"50:50 sharing\", \"70-30 split\", \"Vendor bears 100%\"\n- Percentage splits: \"80% vendor, 20% FK\", \"Vendor share: 60%\"\n- Common patterns: \"Brand funded\", \"Vendor fully funded\" = 100:0\nFORMAT: Return as \"X:Y\" (e.g., \"80:20\", \"100:0\", \"50:50\")\nIF NOT FOUND: Return \"Not specified\"\n"
        },
        {
          "prefix": "Config Vendor Split Reasoning:",
          "description": "REASONING: How did you determine the split ratio? What text indicated the sharing arrangement?"
        },
        {
          "prefix": "Config Unit Slab Lower:",
          "description": "Extract the LOWER BOUND of the unit/quantity slab.\nLOOK FOR:\n- Slab definitions: \"1-100 units\", \"Min qty: 50\", \"From 0 to 500\"\n- Minimum thresholds: \"Above 100 units\", \"Starting from 1\"\nFORMAT: Return numeric value only (e.g., \"0\", \"1\", \"100\")\nIF NOT FOUND: Return \"0\" as default lower bound\n"
        },
        {
          "prefix": "Config Unit Slab Upper:",
          "description": "Extract the UPPER BOUND of the unit/quantity slab.\nLOOK FOR:\n- Slab definitions: \"1-100 units\", \"Max qty: 500\", \"Up to 1000\"\n- Maximum limits: \"Quantity cap: 999\", \"No limit\" = \"999999\"\nFORMAT: Return numeric value only (e.g., \"100\", \"500\", \"999999\")\nIF NOT FOUND: Return \"999999\" (no upper limit)\n"
        },
        {
          "prefix": "Config Slab Reasoning:",
          "description": "REASONING: How did you identify the slab bounds? What quantities were mentioned?"
        },
        {
          "prefix": "Config Max Support Value:",
          "description": "Extract the MAXIMUM SUPPORT VALUE (cap on total support amount).\nLOOK FOR:\n- Max cap mentions: \"Max support: Rs.10L\", \"Cap of ₹50,000\", \"Global cap: 1Cr\"\n- Limit phrases: \"Not exceeding\", \"Up to\", \"Maximum reimbursement\"\nFORMAT: Return the amount (e.g., \"Rs.10,00,000\", \"₹50000\", \"1Cr\")\nIF NOT FOUND: Return \"No Cap\"\n"
        },
        {
          "prefix": "Config Max Support Reasoning:",
          "description": "REASONING: How did you find the max support cap? What text indicated this limit?"
        },
        {
          "prefix": "Config Margin:",
          "description": "Extract the MARGIN percentage (if mentioned).\nLOOK FOR:\n- Margin mentions: \"Margin: 8%\", \"8% margin\", \"Retail margin of 10%\"\n- Profit margins: \"Dealer margin\", \"Trade margin\"\nFORMAT: Return percentage value (e.g., \"8%\", \"10%\")\nIF NOT FOUND: Return \"Not specified\"\n"
        },
        {
          "prefix": "Config Margin Reasoning:",
          "description": "REASONING: How did you identify the margin? What text mentioned margin percentage?"
        }
      ]
    },
    "lm": null
  },
  "metadata": {
    "dependency_versions": {
      "python": "3.10",
      "dspy": "3.0.4",
      "cloudpickle": "3.1"
    }
  }
}